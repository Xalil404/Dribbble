{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <!-- Profile Section -->
        <div class="col-md-3">
            <div class="card">
                {% if profile.profile_picture %}
                    <img src="{{ profile.profile_picture.url }}" class="card-img-top img-fluid" alt="{{ profile.user.username }}">
                {% else %}
                    <img src="https://res.cloudinary.com/dnbbm9vzi/image/upload/v1726685042/Group_949_oufsqq.png" class="card-img-top img-fluid" alt="{{ profile.user.username }}">
                {% endif %}
                <div class="card-body text-center">
                    <h3 class="card-title">{{ profile.user.username }}</h3>
                    <p class="card-text">{{ profile.bio }}</p>
                </div>
            </div>
        </div>

        <!-- Work Section -->
        <div class="col-md-9">
            <h4>Uploaded Works</h4>
            <div class="row">
                {% for work in works %}
                    <div class="col-md-4">
                        <div class="card mb-4">
                            <img src="{{ work.work_image.url }}" class="card-img-top img-fluid" alt="{{ work.title }}">
                            <div class="card-body">
                                <h5 class="card-title">{{ work.title }}</h5>
                                <p class="card-text">{{ work.description }}</p>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <p>No work uploaded yet.</p>
                {% endfor %}
            </div>

            <!-- Posts Section -->
            <h4>User Posts</h4>
            <ul class="list-group mb-4">
                {% for post in posts %}
                    <li class="list-group-item">
                        <h5>{{ post.title }}</h5>
                        <p>{{ post.content }}</p>
                        <small>Posted on {{ post.created_at }}</small>
                    </li>
                {% empty %}
                    <p>No posts yet.</p>
                {% endfor %}
            </ul>

            <!-- Liked Works Section -->
            <h4>Liked Works</h4>
            <div class="row">
                {% for like in liked_works %}
                    <div class="col-md-4">
                        <div class="card mb-4">
                            <img src="{{ like.work.work_image.url }}" class="card-img-top img-fluid" alt="{{ like.work.title }}">
                            <div class="card-body">
                                <h5 class="card-title">{{ like.work.title }}</h5>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <p>No liked works yet.</p>
                {% endfor %}
            </div>

            <!-- Liked Posts Section -->
            <h4>Liked Posts</h4>
            <ul class="list-group">
                {% for like in liked_posts %}
                    <li class="list-group-item">
                        <h5>{{ like.post.title }}</h5>
                        <p>{{ like.post.content }}</p>
                        <small>Posted on {{ like.post.created_at }}</small>
                    </li>
                {% empty %}
                    <p>No liked posts yet.</p>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock content %}
